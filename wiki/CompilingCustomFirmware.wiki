#summary HowTo Compile Custom Firmware
#sidebar TOC

= Самостоятельная сборка прошивки =

== 1. Необходимый софт ==

  * Linux с установленными пакетами
    * standard compilation software
    * libncurses-dev
    * gawk
    * g++
    * flex
    * zlib development

== 2. Скачать исходники ==
  * Первоисточник от ASUS [http://dlsvr01.asus.com/pub/ASUS/wireless/WL-500g-03/GPL_1927.zip GPL_1927.zip] ([http://www.asus.com.cn/pub/ASUS/wireless/WL-500g-03/GPL_1927.zip Зеркало])
  * Toolchain [http://wl500g.googlecode.com/files/hndtools-mipsel-uclibc-4.1.2-1.tar.bz2 hndtools-mipsel-uclibc-4.1.2-1.tar.bz2]
  * Linux kernel [http://www.kernel.org/pub/linux/kernel/v2.4/linux-2.4.37.tar.bz2 linux-2.4.37.tar.bz2]
  * Исходники прошивки wl500g-1.9.2.7-d.tar.bz2  

== 3. Распаковать архивы и подготовить дерево сборки ==

  * Распаковка (путь _/whatever-you-want_ заменить на тот, где будет храниться дерево сборки) 
{{{
$ tar -C /whatever-you-want -zxvf /home/user/tt/GPL_1927.ZIP
$ tar -C /whatever-you-want/broadcom/src -jxvf wl500g-1.9.2.7-d.tar.bz2
$ tar -C /opt/brcm -jxvf hndtools-mipsel-uclibc-4.1.2.tar.bz2
$ ln -sf /opt/brcm/hndtools-mipsel-uclibc-4.1.2 /opt/brcm/hndtools-mipsel-uclibc
$ rm -rf /whatever-you-want/broadcom/src/linux/linux
$ tar -C /whatever-you-want/broadcom/src/linux -jxvf linux-2.4.37.tar.bz2
$ ln -sf /whatever-you-want/broadcom/src/linux/linux-2.4.37 /whatever-you-want/broadcom/src/linux/linux
}}}
  * Можно удалить старый тулчейн от ASUS/Broadcom
{{{
rm -rf /whatever-you-want/broadcom/opt
}}}
  * Добавить путь к Toolchain (можно внести в личный .profile для удобства)
{{{
$ export PATH=$PATH:/opt/brcm/hndtools-mipsel-uclibc/bin
}}}

== 4. Сборка и компиляция ==

  * Сборка
{{{
$ cd /whatever-you-want/broadcom/src/wl500g-1.9.2.7-d
$ make kernel
$ make
}}}
  * Изменить MODEL=wl500gp в /whatever-you-want/broadcom/src/gateway/Makefile на желаемую
  * Компиляция
{{{
$ cd /whatever-you-want/broadcom/src/gateway
$ make
$ make install
}}}