#summary Специальные пользовательские скрипты

 * В прошивке есть несколько пользовательских скриптов специального назначения. Используя их, вы можете сильно повлиять на поведение роутера в определенных ситуациях.

При создании pre/post скриптов необходимо соблюдать следующие правила:
 * Скрипты должны находится в каталоге /usr/local/sbin
 * В первой строке содержать `#!/bin/sh` если это shell-скрипты (а не бинарники)

Список скриптов:
 # * pre-boot * - вызывается перед основной процедурой инициализации, кода еще не загружены модули ядра, но flashfs уже развернута и файлы из /usr/etc скопированы в /etc.<br><br>
 # * post-boot * - вызывается после запуска всех основных сервисов, за исключением сервисов веб-камеры и usb диска<br><br>
 # * pre-shutdown * - вызывается перед перезагрузкой.<br><br>
 # * pre-mount * - вызывается при подключении usb диска но перед его монтированием, скрипт предназначен для ручного монтирования, проверки дисков и т.п. Аргументы:<br>  $1 - product ID (например: "58f/6387/142")<br><br>
 # * post-mount * - отрабатывает, когда роутер завершил монтирование usb диска, с тем чтобы Вы могли запустить свои сервисы, которые эти диски используют. Аргументы:<br>   $1 - product ID<br>  $2 - точка монтирования<br><br>
 # * post-firewall * - запускается всякий раз, когда роутер изменяет правила маршрутизации и файерволла (для примера - после смены IP адреса WAN), чтобы позволить добавить пользовательские правила в таблицы файерволла. Аргументы:<br>   $1 / $2 - имя WAN интерфейса / WAN IP<br>  $3 / $4 - имя LAN интерфейса / LAN IP<br> $5 / $6 - имя DMZ интерфейса / DMZ IP<br><br>

* ВНИМАНИЕ: * _Некорректные скрипты могут привести к невозможности штатной работы роутера. Дважды проверяйте свои изменения перед их окончательным применением. Если ваш роутер всё-таки отказывается загружаться, перепрошейте его любой другой версией ПО через TFTP и выполните следующие команды:_
{{{
 nvram set boot_local
 nvram commit
}}}
_После чего вы можете перепрошить роутер обратно на нужную версию и нормально загрузиться_